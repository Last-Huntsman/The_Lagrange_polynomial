## Lagrange Polynomial (JavaFX)

Интерактивное JavaFX‑приложение для построения интерполяционного полинома Лагранжа по пользовательским точкам на плоскости. Точки добавляются кликами мыши по `Canvas`, кривая отрисовывается антиалиасинговым алгоритмом Ву для ровных, «гладких» сегментов.

### Возможности
- **Добавление точек кликом**: ЛКМ по `Canvas` добавляет опорную точку (дубли по близости ~3 px игнорируются).
- **Интерполяция Лагранжа**: по всем опорным точкам вычисляется полином Лагранжа, дискретно семплируемый по X в диапазоне [1; 800] с шагом 0.1.
- **Плавная отрисовка линий**: соединение последовательных семплов линии выполнено алгоритмом **Xiaolin Wu** (антиалиасинг).
- **Адаптивный `Canvas`**: размеры холста следуют за родительским `AnchorPane`.
- **Сохранение точек**: текущие точки записываются в `test.txt` в корне проекта; есть метод для загрузки из файла.

### Скриншоты / Гиф
Добавьте сюда изображение/гифку работы приложения, если нужно.

---

### Стек
- Java 18
- JavaFX 18 (`javafx-controls`, `javafx-fxml`)
- Maven

### Структура проекта
```
src/
  main/
    java/
      Task/
        ProtoCurveApplication.java   # Точка входа JavaFX
        ProtoCurveController.java    # Контроллер сцены, обработка кликов/отрисовка
        Function.java                # Вычисление значений полинома Лагранжа
        WuLineDrawing.java           # Алгоритм рисования линий Ву (антиалиасинг)
      module-info.java               # Модуль и экспорт пакета Task
    resources/
      Task/
        mainwindow.fxml              # Разметка сцены (AnchorPane + Canvas)
pom.xml                              # Зависимости и плагины
test.txt                             # Файл с сохранёнными точками (генерируется)
```

### Ключевые классы
- `Task.ProtoCurveApplication` — инициализация JavaFX, загрузка `mainwindow.fxml` и показ сцены 800×600.
- `Task.ProtoCurveController` —
  - хранит список точек;
  - на ЛКМ добавляет точку, перерисовывает все точки и кривую;
  - ограничивает экстремальные значения Y, чтобы не уезжали далеко за холст;
  - сохраняет точки в `test.txt`; есть метод `loadPointsFromFile()` для загрузки и `redrawCanvas()` для восстановления отрисовки.
- `Task.Function` —
  - сортирует точки по X;
  - вычисляет значения интерполирующего полинома Лагранжа на равномерной сетке X от 1 до 800 с шагом 0.1;
  - формирует список точек для отрисовки.
- `Task.WuLineDrawing` — реализация алгоритма Xiaolin Wu: вспомогательные функции `ipart`, `fpart`, `rfpart`, `round` и `plot(...)` для рисования субпиксельной яркости через альфа‑канал.

---

### Установка и запуск

Требования:
- JDK 18+
- Maven 3.8+

1) Склонируйте репозиторий и перейдите в каталог проекта.

2) Запуск из IDE (рекомендуется для первого запуска):
- Убедитесь, что модульный путь JavaFX подхватывается автоматически (в Maven-проекте это сделает плагин/IDE).
- Запустите `Task.ProtoCurveApplication` как Java Application.

3) Запуск из Maven:
- В `pom.xml` используется `javafx-maven-plugin`. Для корректного запуска с модулями укажите главный класс как `moduleName/MainClass`.
- В проекте модуль объявлен в `module-info.java` как `com.cgvsu.rasterizationfxapp`, а главный класс — `Task.ProtoCurveApplication`.
- Если потребуется, поправьте конфигурацию плагина:

```xml
<plugin>
  <groupId>org.openjfx</groupId>
  <artifactId>javafx-maven-plugin</artifactId>
  <version>0.0.8</version>
  <executions>
    <execution>
      <id>default-cli</id>
      <configuration>
        <mainClass>com.cgvsu.rasterizationfxapp/Task.ProtoCurveApplication</mainClass>
      </configuration>
    </execution>
  </executions>
  <configuration>
    <launcher>app</launcher>
  </configuration>
  <!-- при необходимости добавьте modules: javafx-controls,javafx-fxml -->
  <!-- <components>controls,fxml</components> можно использовать в новых версиях плагина -->
  <!-- см. документацию плагина для вашей версии Maven/JavaFX -->
  
</plugin>
```

После чего можно выполнить:

```bash
mvn -q clean javafx:run
```

Примечание: если вы не используете модули JPMS, можно запустить через IDE без изменения `pom.xml`.

---

### Использование
- Запустите приложение.
- Кликните ЛКМ по холсту, чтобы добавить опорные точки.
- Полином Лагранжа будет построен по всем добавленным точкам; кривая отрисовывается как последовательность антиалиасинговых сегментов.
- Точки автоматически сохраняются в `test.txt`. Метод `loadPointsFromFile()` может восстановить точки и кривую (в текущей разметке вызов закомментирован — раскомментируйте при необходимости).

Ограничения и особенности:
- Полином высокой степени (много точек) может демонстрировать эффект Рунге и большие отклонения между опорными точками — это математически ожидаемо для глобальной интерполяции полиномом высокой степени.
- Значения Y за пределами холста «обрезаются» к разумным границам при отрисовке линий.

---

### Алгоритмы
- **Полином Лагранжа**: для набора опорных точек \( (x_i, y_i) \) используется базис Лагранжа
  \[ L(x) = \sum_{i=0}^{n-1} y_i \prod_{j=0, j\ne i}^{n-1} \frac{x - x_j}{x_i - x_j} \]
  Значения семплируются по X от 1 до 800 с шагом 0.1.
- **Алгоритм Ву (Xiaolin Wu)**: антиалиасинговая отрисовка линий с любым наклоном путём распределения яркости между соседними пикселями пропорционально дробной части пересечения идеальной линии с центрами пикселей.

---

### Тесты
В проект добавлены зависимости JUnit 5; тестов для логики интерполяции пока нет. Для повышения надёжности можно добавить модульные тесты на:
- корректность вычисления значений Лагранжа на простых наборах точек;
- поведение при совпадающих `x` (сейчас такие точки не добавляются в UI на этапе клика, но в данных их желательно валидировать и в логике);
- численную устойчивость при большом числе опорных точек.

### Дальнейшие улучшения
- Переключаемые режимы: полилиния без антиалиасинга / с антиалиасингом; сплайны.
- Динамический диапазон X и шаг семплирования, зависящие от размеров `Canvas`.
- Управление точками: удаление/перетаскивание, подсветка ближайшей точки.
- Загрузка точек при старте (вызов `loadPointsFromFile()`), выбор файла.
- Экспорт изображения (`PNG`) и/или данных (`CSV`).

### Лицензия
Добавьте информацию о лицензии при необходимости.


